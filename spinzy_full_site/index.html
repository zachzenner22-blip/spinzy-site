<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spinzy - Random Spinner</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png" />

  <!-- Social Share (Open Graph & Twitter Cards) -->
  <meta property="og:title" content="Spinzy - Random Spinner" />
  <meta property="og:description" content="Spin the wheel to pick a random winner or decision. Free online spinner tool!" />
  <meta property="og:image" content="preview.png" />
  <meta property="og:url" content="https://spinzy.netlify.app" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Spinzy - Random Spinner" />
  <meta name="twitter:description" content="Spin the wheel to pick a random winner or decision." />
  <meta name="twitter:image" content="preview.png" />

  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: #f4f4f9;
      transition: background 0.3s, color 0.3s;
    }
    h1 { margin-bottom: 10px; }
    #wheelCanvas {
      border: 4px solid #333;
      border-radius: 50%;
      background: white;
      max-width: 90vw;
      height: auto;
    }
    #controls {
      margin-top: 20px;
      text-align: center;
      width: 90%;
      max-width: 400px;
    }
    textarea {
      width: 100%;
      height: 100px;
      margin-bottom: 10px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      resize: vertical;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      background: #00a8ff;
      color: white;
      margin: 5px;
    }
    button:hover { background: #007bbf; }
    #winner {
      margin-top: 20px;
      font-size: 20px;
      font-weight: bold;
      color: green;
    }
    .dark-mode { background: #121212; color: #eaeaea; }
    .dark-mode #wheelCanvas { background: #333; border-color: #eaeaea; }
    .dark-toggle {
      position: absolute;
      top: 15px;
      right: 15px;
      background: #333;
      color: white;
      border-radius: 50px;
      padding: 8px 12px;
      font-size: 14px;
    }
  </style>
  <!-- Placeholder for AdSense -->
</head>
<body>
  <button class="dark-toggle" onclick="toggleDarkMode()">🌙 Dark Mode</button>
  <h1>🎡 Spinzy</h1>
  <canvas id="wheelCanvas" width="400" height="400"></canvas>

  <div id="controls">
    <textarea id="nameInput" placeholder="Enter names, one per line..."></textarea><br />
    <button onclick="spin()">Spin!</button>
    <div id="winner"></div>
  </div>

  <script>
    const canvas = document.getElementById('wheelCanvas');
    const ctx = canvas.getContext('2d');
    let options = ['Option 1', 'Option 2', 'Option 3'];
    let startAngle = 0;
    let arc = Math.PI / (options.length / 2);
    let spinTimeout = null;

    function drawRouletteWheel() {
      const outsideRadius = 180;
      const textRadius = 140;
      const insideRadius = 50;

      ctx.clearRect(0, 0, 400, 400);
      ctx.strokeStyle = 'black';
      ctx.lineWidth = 2;
      ctx.font = '16px Arial';

      for (let i = 0; i < options.length; i++) {
        const angle = startAngle + i * arc;
        ctx.fillStyle = i % 2 === 0 ? '#fbc531' : '#00a8ff';

        ctx.beginPath();
        ctx.arc(200, 200, outsideRadius, angle, angle + arc, false);
        ctx.arc(200, 200, insideRadius, angle + arc, angle, true);
        ctx.stroke();
        ctx.fill();

        ctx.save();
        ctx.fillStyle = 'black';
        ctx.translate(
          200 + Math.cos(angle + arc / 2) * textRadius,
          200 + Math.sin(angle + arc / 2) * textRadius
        );
        ctx.rotate(angle + arc / 2 + Math.PI / 2);
        const text = options[i];
        ctx.fillText(text, -ctx.measureText(text).width / 2, 0);
        ctx.restore();
      }

      ctx.fillStyle = 'red';
      ctx.beginPath();
      ctx.moveTo(200 - 10, 200 - (outsideRadius + 20));
      ctx.lineTo(200 + 10, 200 - (outsideRadius + 20));
      ctx.lineTo(200, 200 - (outsideRadius - 5));
      ctx.closePath();
      ctx.fill();
    }

    function rotateWheel() {
      startAngle += spinAngleIncrement * Math.PI / 180;
      drawRouletteWheel();
      if (spinTime < spinTimeTotal) {
        spinTime += 30;
        spinAngleIncrement -= (spinAngleIncrement * spinTime) / spinTimeTotal;
        spinTimeout = setTimeout(rotateWheel, 30);
      } else {
        stopRotateWheel();
      }
    }

    let spinAngleIncrement;
    let spinTime;
    let spinTimeTotal;

    function spin() {
      const input = document.getElementById('nameInput').value.trim();
      if (input) {
        options = input.split(/\n+/);
        arc = Math.PI / (options.length / 2);
      }
      spinAngleIncrement = Math.random() * 10 + 10;
      spinTime = 0;
      spinTimeTotal = Math.random() * 3000 + 4000;
      rotateWheel();
    }

    function stopRotateWheel() {
      clearTimeout(spinTimeout);
      const degrees = (startAngle * 180) / Math.PI + 90;
      const arcd = (arc * 180) / Math.PI;
      const index = Math.floor((360 - (degrees % 360)) / arcd);
      const winner = options[index];
      document.getElementById('winner').textContent = '🎉 Winner: ' + winner + ' 🎉';
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      const btn = document.querySelector('.dark-toggle');
      btn.textContent = document.body.classList.contains('dark-mode') ? '☀️ Light Mode' : '🌙 Dark Mode';
    }

    drawRouletteWheel();
  </script>
</body>
</html>
